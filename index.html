<!DOCTYPE html>
<html ng-app='myApp'>
  <head>
    <meta charset="utf-8">
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" integrity="sha384-h21C2fcDk/eFsW9sC9h0dhokq5pDinLNklTKoxIZRUn3+hvmgQSffLLQ4G4l2eEr" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="main.css">
    <title>Reddit Clone</title>
  </head>
  <body ng-controller='MainController'>
    <!-- Navbar -->
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Reddit Clone</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
          <ul class="nav navbar-nav">
            <li class="active" ng-click='ShowAddPost()'><a href="#"> + Add Post <span class="sr-only">(current)</span></a></li>
          </ul>
          <form class="navbar-form navbar-left" role="search">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Search" ng-model='view.searchBox'>
            </div>
            <select ng-model='view.select'class="form-control" id="select">
             <option selected disabled>Sort By</option>
             <option value='rating' ng-click='sortBy(rating)'>Rating</option>
             <option value='date' ng-click='sortBy(date)'>Date</option>
           </select>
          </form>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->

    <!-- Hidden Add Post Div -->
    <div class='col-xs-12 add-post' ng-show='ToggleAddPostIsVisible' >
      <form>
        <div>
          <div class='col-xs-10'>
            <div>
              <label for="title">Title</label>
            </div>
            <input type='text' class='col-xs-12' ng-model='view.title' maxlength="18"value='TITLETEST' required>
          </div>
          <div class='col-xs-10'>
            <div>
              <label class='control-label' for="author">Author</label>
            </div>
            <input type='text' class='col-xs-12' ng-model='view.author' value='AUTHOR' required>
          </div>
          <div class='col-xs-10'>
            <div>
              <label for="imageurl">Image Url</label>
            </div>
            <input type='url' class='col-xs-12' ng-model='view.imageurl' value='http://bit.ly/2esWdvR' required>
          </div>
          <div class='col-xs-10'>
            <div>
              <label for='description'>Description</label>
            </div>
            <input type='text' class='col-xs-12' ng-model='view.description' value='DESCRIPTION' required>
          </div>
          <div class='col-xs-10 submit-button'>
            <button type='submit' ng-click='CreatePost()' class="btn btn-primary">Submit Post</button>
          </div>
        </div>
      </form>
    </div>
      <!--End Hidden AddPost Div -->

      <!--  Posts should make a new post on every submit to add post-->
    <div class='col-xs-10 posts' ng-repeat="(index,post) in view.postArray | filter: view.searchBox | orderBy:'view.select'">
      <div class='col-xs-3 '>
        <img ng-src='{{post.imageurl}}' class='image-box'alt='user added image'></img>
      </div>
      <div>
        <div class='col-xs-8'>
          <div class='col-xs-5'>
            <h2> {{post.title | lowercase}} </h2>
          </div>
          <div class='col-xs-1 btn btn-lg rating-button'>
            <span class="glyphicon glyphicon-arrow-up" aria-hidden="true" ng-click="Upvote(post)"></span>
          </div>
          <div class='col-xs-1 btn btn-lg rating-button'>
            <span class="glyphicon glyphicon-arrow-down" aria-hidden="true" ng-click='Downvote(post)'></span>
          </div>
          <div class='col-xs-1 rating-score'>
            <h2>{{post.votes}}</h2>
          </div>
        </div>
        <div>
          <div class='col-xs-8 post-author'>
            <h4> {{post.author}} </h4>
          </div>
        </div>
        <div>
          <div class='col-xs-8'>
            <h5 class='textbox'> {{post.description}} </h5>
          </div>
        </div>
        <div class='col-xs-8'>
          <div class='col-xs-1 icon'>
            <span class="glyphicon glyphicon-calendar " aria-hidden="true"></span>
          </div>
          <div class='col-xs-2 post-date-comment'>
            <h6>{{post.time | date:'medium'}}</h6>
          </div>
          <div class="col-xs-1 icon">
            <span class="glyphicon glyphicon-comment " aria-hidden="true"></span>
          </div>
          <div class='col-xs-2 post-date-comment'>
            <h5># of comments</h5>
          </div>
          <div class='col-xs-1 icon'>
            <span class="glyphicon glyphicon-pencil " aria-hidden="true"></span>
          </div>
          <div class='col-xs-2 post-date-comment'>
            <button ng-click="AddComment(index)"> Add comment</button>
          </div>
        </div>
      </div>
      <!--comments -->
      <div ng-show="post.AddCommentBox">
        <form>
          <label for='userComment'> Enter Your Comment </label>
          <div>
            <input type='text' class='col-xs-5' ng-model='view.comment' maxlength="160" value='BLAH' required>
            <button ng-click='SubmitComment(post, index)' type='submit'>Submit</button>
          </div>
        </form>
      </div>
      <div ng-show='post.CommentVisible'>
        <div ng-repeat='comment in post.comments'>
          <h2> {{comment}} </h2>
        </div>
      </div>
      <!-- end of comments -->
    </div>


      <!-- End of Posts -->

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.js"></script>
    <script src="app.js"></script>
  </body>
</html>
